<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ’¥ ë¹„ì†ì–´ ë³€í™˜ê¸° ğŸ’¥</title>
<style>
  body { margin:0; padding:0; background:linear-gradient(135deg,#74b9ff,#6c5ce7); font-family:"ë§‘ì€ ê³ ë”•", sans-serif;}
  .container { max-width:1100px; margin:0 auto; display:flex; min-height:100vh; background:#ffffffdd;
    backdrop-filter:blur(6px); border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,.15);}
  .left-pane {flex:1.5; padding:35px; border-right:2px solid #ddd; display:flex; flex-direction:column; align-items:center;}
  .right-pane {flex:1; padding:35px; display:flex; flex-direction:column;}
  h1 {text-align:center; font-size:28px; margin-bottom:10px;}
  p {text-align:center; margin-bottom:20px;}
  textarea {width:100%; min-height:100px; padding:12px; font-size:15px; border:2px solid #dfe6e9;
    border-radius:10px; resize:vertical; outline:none;}
  textarea:focus{border-color:#0984e3;}
  .controls {display:flex; gap:10px; margin:15px 0;}
  select, button {font-size:15px; padding:10px 16px; border-radius:8px; border:1px solid #ccc;}
  button {background:linear-gradient(90deg,#0984e3,#6c5ce7); border:none; color:#fff; font-weight:bold; cursor:pointer;}
  button:hover{box-shadow:0 4px 8px rgba(0,0,0,.2);}
  #output-wrapper {margin-top:25px; width:100%; text-align:center;}
  #output-title {font-size:20px; font-weight:600; margin-bottom:12px;}
  #output {
    font-size:34px; font-weight:bold; color:#0984e3;
    background:#f1f2f6; padding:24px; border-radius:12px; min-height:90px;
    display:flex; align-items:center; justify-content:center;
  }
  #btn-add-my-record{margin-top:10px; display:none;}
  .history-section{margin-bottom:20px;}
  .history-title{font-weight:bold; font-size:17px; border-bottom:2px solid #636e72; margin-bottom:10px; padding-bottom:5px;}
  #my-records-form {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 12px;
  }
  #my-records-form > div {
    display: flex;
    gap: 8px;
    align-items: stretch;
  }
  #my-records-form input[type="text"] {
    padding: 8px 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-sizing: border-box;
    flex: 1;
  }
  #my-record-add-btn {
    min-width: 100px;
    font-size: 15px;
    border-radius: 10px;
    background: linear-gradient(90deg,#0984e3,#6c5ce7);
    color: #fff;
    font-weight: bold;
    border: none;
    cursor: pointer;
  }
  #btn-copy-my-records {
    padding: 12px 24px;
    font-size: 15px;
    cursor: pointer;
    border-radius: 10px;
    background: linear-gradient(90deg,#0984e3,#6c5ce7);
    color: #fff;
    border: none;
    user-select: none;
    margin: 18px auto 12px auto;
    width: 210px;
    display: block;
  }
  #my-record-list, #history-list {
    background:#f9fbff;
    border-radius:10px;
    padding:10px;
    min-height:50px;
    max-height:150px;
    overflow-y:auto;
    font-size:14px;
    max-width:380px;
    margin: 0 auto;
  }
  .my-record-item, .history-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 0;
    border-bottom: 1px solid #eee;
  }
  .my-record-item:last-child,.history-item:last-child{border-bottom:none;}
  .myrecord-text {
    flex: 1;
    word-break: break-word;
  }
  .myrecord-btns {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
  }
  .btn-edit,.btn-delete {
    padding: 4px 10px;
    font-size: 13px;
    border: none;
    border-radius: 5px;
    color: #fff;
    cursor: pointer;
  }
  .btn-edit {
    background: #0984e3;
  }
  .btn-edit:hover {
    background: #6c5ce7;
  }
  .btn-delete {
    background: #d63031;
  }
  .btn-delete:hover {
    background: #b32020;
  }

  /* ëª¨ë°”ì¼ ëŒ€ì‘ */
  @media (max-width: 768px) {
    .container {
      flex-wrap: wrap;
      min-width: 320px;
      padding: 10px;
    }
    .left-pane, .right-pane {
      flex: 1 1 100%;
      max-width: 100%;
      padding: 15px 10px;
      border-right: none;
      margin-bottom: 20px;
    }
    h1 {
      font-size: 24px;
      line-height: 1.2;
    }
    #output {
      font-size: 26px;
      padding: 18px;
      min-height: 70px;
    }
    #my-record-list, #history-list {
      max-width: 100%;
      padding: 8px;
    }
  }
</style>
</head>
<body>
<div class="container">
  <div class="left-pane">
    <h1>ğŸ’¥ ë¹„ì†ì–´ ë³€í™˜ê¸° ğŸ’¥</h1>
    <p>ë‚´ê°€, ë„ˆê°€, ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ë§Œë“¤ì–´ ê°€ë³´ìêµ¬ ğŸ¶</p>
    <textarea id="inputText" placeholder="ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
    <div class="controls">
      <label for="wordLengthSelect">ê¸€ì ìˆ˜:</label>
      <select id="wordLengthSelect">
        <option value="random">ë¬´ì‘ìœ„</option>
        <option value="1">1ê¸€ì</option>
        <option value="2">2ê¸€ì</option>
        <option value="3">3ê¸€ì</option>
        <option value="4">4ê¸€ì</option>
      </select>
      <button id="convertBtn">ğŸš€ ë³€í™˜í•˜ê¸°</button>
    </div>
    <div id="output-wrapper">
      <div id="output-title">âœ¨ ê²°ê³¼:</div>
      <div id="output"></div>
      <button id="btn-add-my-record">â• ë‚´ ê¸°ë¡ì— ì¶”ê°€í•˜ê¸°</button>
    </div>
  </div>
  <div class="right-pane">
    <div class="history-section">
      <div class="history-title">ğŸ“‹ ë‚´ ê¸°ë¡</div>
      <div id="my-records-form">
        <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ (ì˜ˆ: ì² ìˆ˜)" />
        <div>
          <input type="text" id="my-record-input-original" placeholder="ì›ë˜ ë¹„ì†ì–´ ì…ë ¥" />
          <input type="text" id="my-record-input-replaced" placeholder="ë‚˜ë§Œì˜ ë³€í™˜ì–´ ì…ë ¥" />
        </div>
        <button id="my-record-add-btn">â• ì¶”ê°€</button>
      </div>
      <div id="my-record-list"></div>
      <button id="btn-copy-my-records">ğŸ“ ë‚´ ê¸°ë¡ URL ë³µì‚¬</button>
    </div>
    <div class="history-section">
      <div class="history-title">ğŸ“ ë³€í™˜ ê¸°ë¡</div>
      <div id="history-list"></div>
    </div>
  </div>
</div>
<script>
const swearWords=[
  'ì”¨ë°œ','ì”¨ë°œë…„','ì”¨ë°œë†ˆ','ì‹œë°œ','ì‹œë°œë…„','ì‹œë°œë†ˆ','ê°œìƒˆë¼','ë³‘ì‹ ','ì¡´ë‚˜','ì…',
  'ê°œë…„','ê°œì¢†ê°™ë„¤','ì¢†ê°™ë„¤','ì¢†','ëŠê¸ˆë§ˆ','ë‹ˆë¯¸',
  'ì¢‡ê°™ë„¤','ê°œì¢‡ê°™ë„¤','ì¢‡ê°™ì€','ì¢‡ë§Œì´','ì¢†ë§Œì´','ì”¹ìƒˆ','ì”¹ìƒˆë¼' 
];
const firstSoundMap={
  'ì”¨ë°œ':['ìŒ‰','ìŒ”','ì´','ìƒ¤','ì‹¸','ìŒ°','ì˜','ì‘¤'],
  'ì”¨ë°œë…„':['ìŒ','ìŒ€','ìŒ°','ì“©','ì½','ì‹¸'],
  'ì”¨ë°œë†ˆ':['ì”½','ìŒ','ì…','ìŒ°','ì…','ì½','ì¨'],
  'ì”¹ìƒˆ':['ì˜','ì‘¤','ì“”','ì‘ˆ','ì”½','ìŒ©'],
  'ì”¹ìƒˆë¼':['ì˜','ì‘¤','ì“”','ì‘ˆ','ì”½','ìŒ©'],
  'ì…':['ì‘','ì½','ì‘¤','ì”½'],
  'ê°œìƒˆë¼':['ê¹”','ê»„','ê¿','ê½','êº„','ê¾œ','ê»´'],
  'ë³‘ì‹ ':['ë¹¡','ë»‘','ë¹µ','ë¿œ'],
  'ì¡´ë‚˜':['ì«™','ì­‰','ì­ˆ','ìª½','ì°Ÿ'],
  'ì‹œë°œ':['ìŒ‰','ìŒ”','ì´','ìƒ¤','ì‹¸','ìŒ°','ì˜','ì‘¤'],
  'ì‹œë°œë…„':['ìŒ','ìŒ€','ìŒ°','ì“©','ì½','ì‹¸'],
  'ì‹œë°œë†ˆ':['ìŒ','ìŒ€','ìŒ°','ì“©','ì½','ì‹¸'],
  'ê°œë…„':['ê°€','ê°¸','ê±°','ê²¨','ê³ ','êµ','ê¹…','ê°•','ê±'],
  'ê°œì¢†ê°™ë„¤':['ê¹¨','ë¼','ë‹¤','ë”°','ë ','ë•…','ë–µ'],
  'ì¢†ê°™ë„¤':['ë‹¤','ë”°','ë ','ë•…','ë–µ','ëµ'],
  'ì¢†':['ë”°','ëšœ','ë˜','ë•…','ë–µ','ëµ'],
  'ëŠê¸ˆë§ˆ':['ë¯¸','ë¨¸','ê²¨','ê°¸','êµ'],
  'ë‹ˆë¯¸':['ë§ˆ','ë¬´','ë‹˜','ë‹','ë‹'],
  'ì¢‡ê°™ë„¤':['ë”°','ë˜','ë•','ëµ','í……'],
  'ê°œì¢‡ê°™ë„¤':['êº„','ê»´','ë¼','ì¿„','ê¾œ'],
  'ì¢‡ê°™ì€':['ë„','ë˜','ë•…','ëµ'],
  'ì¢‡ë§Œì´':['ë•¡','ëš±','ë–µ','ë ','ë”°'],
  'ì¢†ë§Œì´':['ë˜','ë ','ë”°','ëµ','ë–µ']
};
const onsetConsonants=['ã…‹','ã…','ã……','ã…ˆ','ã„±','ã„·','ã…‚','ã„´','ã„¹'];
const vowels=['ã…','ã…“','ã…‘','ã…•','ã…—','ã…œ','ã…›','ã… ','ã…¡','ã…£','ã…','ã…”'];
const codaConsonants=['','ã„±','ã„´','ã…','ã…‡','ã…‚','ã„¹'];

const forbiddenPatterns=[/ê°€ìŠ´/,/ìì§€/,/ë³´ì§€/,/ì„¹ìŠ¤/,/ì…ìŠ¤/,/ì„¹/,/sex/i,/ì„¹ì“°/,/ê¼¬ì¶”/,/ê³ ì¶”/,/ë…„/];
function isForbiddenWord(word){return forbiddenPatterns.some(p=>p.test(word));}
function makeHangulSyllable(cho,jung,jong){
  const choList=['ã„±','ã„²','ã„´','ã„·','ã„¸','ã„¹','ã…','ã…‚','ã…ƒ','ã……','ã…†','ã…‡','ã…ˆ','ã…‰','ã…Š','ã…‹','ã…Œ','ã…','ã…'];
  const jungList=['ã…','ã…','ã…‘','ã…’','ã…“','ã…”','ã…•','ã…–','ã…—','ã…˜','ã…™','ã…š','ã…›','ã…œ','ã…','ã…','ã…Ÿ','ã… ','ã…¡','ã…¢','ã…£'];
  const jongList=['','ã„±','ã„²','ã„³','ã„´','ã„µ','ã„¶','ã„·','ã„¹','ã„º','ã„»','ã„¼','ã„½','ã„¾','ã„¿','ã…€','ã…','ã…‚','ã…„','ã……','ã…†','ã…‡','ã…ˆ','ã…Š','ã…‹','ã…Œ','ã…','ã…'];
  return String.fromCharCode(0xAC00 + choList.indexOf(cho) * 21 * 28 + jungList.indexOf(jung) * 28 + jongList.indexOf(jong));
}
function generateNewWord(lengthOption,swearWord){
  let wordLength=lengthOption==='random'?Math.floor(Math.random()*4)+1:parseInt(lengthOption);
  if(isNaN(wordLength)||wordLength<1)wordLength=2;
  const maxAttempts=100;
  for(let attempt=0;attempt<maxAttempts;attempt++){
    let word='';
    for(let i=0;i<wordLength;i++){
      const cho=onsetConsonants[Math.floor(Math.random()*onsetConsonants.length)];
      const jung=vowels[Math.floor(Math.random()*vowels.length)];
      const jong=i===wordLength-1&&Math.random()<0.5?codaConsonants[Math.floor(Math.random()*codaConsonants.length)]:'';
      word+=makeHangulSyllable(cho,jung,jong);
    }
    if(firstSoundMap[swearWord]){
      word=firstSoundMap[swearWord][Math.floor(Math.random()*firstSoundMap[swearWord].length)]+word.slice(1);
    }
    if(isForbiddenWord(word))continue;
    return word;
  }
  return Array(wordLength).fill('ê°€').join('');
}
const inputText=document.getElementById('inputText');
const wordLengthSelect=document.getElementById('wordLengthSelect');
const convertBtn=document.getElementById('convertBtn');
const outputDiv=document.getElementById('output');
const btnAddMyRecord=document.getElementById('btn-add-my-record');
const historyList=document.getElementById('history-list');
const myRecordList=document.getElementById('my-record-list');
const myRecordInputOriginal=document.getElementById('my-record-input-original');
const myRecordInputReplaced=document.getElementById('my-record-input-replaced');
const myRecordAddBtn=document.getElementById('my-record-add-btn');
const btnCopyMyRecords=document.getElementById('btn-copy-my-records');
const nicknameInput=document.getElementById('nicknameInput');

function addHistoryItem(original,replaced){
  const div=document.createElement('div');
  div.className='history-item';

  const left=document.createElement('div');
  left.className='history-text';
  left.textContent=original;

  const arrow=document.createElement('div');
  arrow.className='history-arrow';
  arrow.textContent='â†’';

  const right=document.createElement('div');
  right.className='history-result';
  right.textContent=replaced;

  div.appendChild(left);
  div.appendChild(arrow);
  div.appendChild(right);

  historyList.prepend(div);
}
function addMyRecordItem(original,replaced){
  if(!original||!replaced)return;
  const div=document.createElement('div');
  div.className='my-record-item';
  const textDiv=document.createElement('div');
  textDiv.className='myrecord-text';
  textDiv.textContent=`${original} â†’ ${replaced}`;
  const btnsDiv=document.createElement('div');
  btnsDiv.className='myrecord-btns';
  const btnEdit=document.createElement('button');
  btnEdit.className='btn-edit';
  btnEdit.textContent='ìˆ˜ì •';
  btnEdit.addEventListener('click',()=>{
    const newOri=prompt('ì›ë˜ í…ìŠ¤íŠ¸ ìˆ˜ì •',original);
    if(newOri===null)return;
    const newRep=prompt('ë³€í™˜ í…ìŠ¤íŠ¸ ìˆ˜ì •',replaced);
    if(newRep===null)return;
    if(newOri.trim()&&newRep.trim()){
      textDiv.textContent=`${newOri.trim()} â†’ ${newRep.trim()}`;
    }
  });
  const btnDelete=document.createElement('button');
  btnDelete.className='btn-delete';
  btnDelete.textContent='ì‚­ì œ';
  btnDelete.addEventListener('click',()=>{myRecordList.removeChild(div);});
  btnsDiv.appendChild(btnEdit);
  btnsDiv.appendChild(btnDelete);
  div.appendChild(textDiv);
  div.appendChild(btnsDiv);
  myRecordList.prepend(div);
}

convertBtn.addEventListener('click',()=>{
  const text=inputText.value.trim();
  if(!text){outputDiv.textContent="ë¬¸ì¥ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!";return;}
  let replaced=text;
  const sortedSwears=[...swearWords].sort((a,b)=>b.length-a.length);
  sortedSwears.forEach(word=>{
    const regex=new RegExp(word,'gi');
    replaced=replaced.replace(regex,()=>generateNewWord(wordLengthSelect.value,word));
  });
  outputDiv.textContent=replaced;
  btnAddMyRecord.style.display='inline-block';
  addHistoryItem(text,replaced);
});
btnAddMyRecord.addEventListener('click',()=>{
  addMyRecordItem(inputText.value.trim(),outputDiv.textContent.trim());
  btnAddMyRecord.style.display='none';
});
myRecordAddBtn.addEventListener('click',()=>{
  if(myRecordInputOriginal.value&&myRecordInputReplaced.value){
    addMyRecordItem(myRecordInputOriginal.value,myRecordInputReplaced.value);
    myRecordInputOriginal.value='';
    myRecordInputReplaced.value='';
  }
});
function encodeRecordsShort(records){
  return btoa(unescape(encodeURIComponent(records.join('\n')))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');
}
function decodeRecordsShort(str){
  try{return decodeURIComponent(escape(atob(str.replace(/-/g,'+').replace(/_/g,'/')))).split('\n');}
  catch(e){return []}
}
btnCopyMyRecords.addEventListener('click',()=>{
  if(myRecordList.children.length===0){alert("ë‚´ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.");return;}
  const records=[];
  for(let item of myRecordList.children){
    records.push(item.querySelector('.myrecord-text').textContent);
  }
  const recordId=encodeRecordsShort(records);
  const nickname=nicknameInput.value.trim();
  const url=location.origin+location.pathname+'?myRecords='+recordId+(nickname?'&nickname='+encodeURIComponent(nickname):'');
  navigator.clipboard.writeText(url).then(()=>alert("ë‚´ ê¸°ë¡ URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!")).catch(()=>alert("ë³µì‚¬ ì‹¤íŒ¨"));
});
window.addEventListener('load',()=>{
  const params=new URLSearchParams(location.search);
  const rec=params.get('myRecords');
  const nick=params.get('nickname');
  if(nick){
    document.querySelector('h1').textContent=`ğŸ’¥ ${nick}ë‹˜ì˜ ë¹„ì†ì–´ ë³€í™˜ê¸° ğŸ’¥`;
  }
  if(rec){
    const stored=decodeRecordsShort(rec);
    stored.forEach(line=>{
      const idx=line.indexOf('â†’');
      if(idx!==-1){
        const o=line.slice(0,idx).trim();
        const r=line.slice(idx+1).trim();
        if(o&&r)addMyRecordItem(o,r);
      }
    });
  }
});
</script>
</body>
</html>




